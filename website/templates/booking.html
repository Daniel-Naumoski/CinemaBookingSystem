<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <link rel="stylesheet" href=".\static\css\booking.css">
</head>
<body>
    
    <div class="content">
        <div class="movie-container">
            <label class="text-white-50 h3">Pick a movie: </label>
            <select id="movie">
              <option value="200">Joker (200 MKD)</option>
              <option value="275">Super Marios Bros (275 MKD)</option>
              <option value="220">The Batman (220 MKD)</option>
              <option value="240">Dune (240 MKD)</option>
              <option value="250">John Whick (250 MKD)</option>
            </select>
            
            <ul class="showcase">
              <li>
                <div class="seat"></div>
                <small>N/A</small>
              </li>
              <li>
                <div class="seat selected"></div>
                <small>Selected</small>
              </li>
              <li>
                <div class="seat occupied"></div>
                <small>Occupied</small>
              </li>    
            </ul>
            
            <div class="container">
              <div class="screen"></div>
              
              <div class="row">
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                </div>
                <div class="row">
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat occupied"></div>
                  <div class="seat occupied"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                </div>
                <div class="row">
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat occupied"></div>
                  <div class="seat occupied"></div>
                </div>
                <div class="row">
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                </div>
                <div class="row">
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat occupied"></div>
                  <div class="seat occupied"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                </div>
                <div class="row">
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat"></div>
                  <div class="seat occupied"></div>
                  <div class="seat occupied"></div>
                  <div class="seat occupied"></div>
                  <div class="seat"></div>
                </div>
              
              <p class="text text-white-50">
                You have selected <span id="count">0</span> seats for the total price of MKD<span id="total">0</span>
              </p>

              <button class="btn-primary px-2" id="book">Book Seats</button>
            </div>
          </div>
    </div>
    <div class="curtainBody">
        <div id="leftCurtain" class="curtainContainer">
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
        </div>
        
        <div id="rightCurtain" class="curtainContainer">
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
            <div class="unCurtain"></div>
        </div>
        <div class="overlay"></div>
    </div>
    <script>
        //setTimeout(slide,2000);
function slide() {
	document.getElementsByClassName("curtainContainer")[0].style.transform =
		"translatex(-150vw) ";
	document.getElementsByClassName("curtainContainer")[1].style.transform =
		"translatex(150vw)";
}

const container = document.querySelector('.container');
const seats = document.querySelectorAll('.row .seat:not(.occupied)');
const count = document.getElementById('count');
const total = document.getElementById('total');
const movieSelect = document.getElementById('movie');

let ticketPrice = +movieSelect.value;

//Update total and count
function updateSelectedCount() {
  const selectedSeats = document.querySelectorAll('.row .seat.selected');
  const selectedSeatsCount = selectedSeats.length;
  count.innerText = selectedSeatsCount;
  total.innerText = selectedSeatsCount * ticketPrice;
}

//Movie Select Event
movieSelect.addEventListener('change', e => {
  ticketPrice = +e.target.value;
  updateSelectedCount();
});

//Seat click event
container.addEventListener('click', e => {
  if (e.target.classList.contains('seat') &&
     !e.target.classList.contains('occupied')) {
    e.target.classList.toggle('selected');
  }
  updateSelectedCount();
});


function listenAndChange() {
    const element = document.querySelector('.curtainBody');

// Add mouseover event listener to the element
element.addEventListener('mouseover', () => {
  // Change the CSS style to display: none
  setTimeout(() => {
          element.style.display = 'none';
        }, 1000);
});

// Listen for the button click event
document.getElementById('book').addEventListener('click', () => {
  // Change the CSS style back to block
    window.location.href = 'S1_booking.html';
});
}

// Call the function to start listening and changing the CSS
listenAndChange();

    </script>
</body>
</html>